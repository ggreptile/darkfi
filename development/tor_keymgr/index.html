<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="tor-keymgr"><title>tor_keymgr - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="tor_keymgr" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0-nightly (31395ec38 2023-07-24)" data-channel="nightly" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-6d2c9675f3d09c26.css" data-theme-dark-css="dark-45ceb8f2e522f4d1.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-6d2c9675f3d09c26.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-45ceb8f2e522f4d1.css"><link rel="stylesheet" href="../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../tor_keymgr/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../tor_keymgr/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate tor_keymgr</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">tor_keymgr</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/tor_keymgr/lib.rs.html#1-75">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="tor-keymgr"><a href="#tor-keymgr">tor-keymgr</a></h2>
<p>Code to fetch, store, and update keys.</p>
<h3 id="overview"><a href="#overview">Overview</a></h3>
<p>This crate is part of
<a href="https://gitlab.torproject.org/tpo/core/arti/">Arti</a>, a project to
implement <a href="https://www.torproject.org/">Tor</a> in Rust.</p>
<h4 id="likely-to-change"><a href="#likely-to-change"><strong>Likely to change</strong></a></h4>
<p>The APIs exposed by this crate (even without the <code>keymgr</code> feature)
are new and are likely to change rapidly.
We’ll therefore often be making semver-breaking changes
(and will update the crate version accordingly).</p>
<h3 id="key-stores"><a href="#key-stores">Key stores</a></h3>
<p>The <a href="struct.KeyMgr.html" title="struct tor_keymgr::KeyMgr"><code>KeyMgr</code></a> is an interface to one or more key stores. The key
stores are types that implement the <a href="trait.Keystore.html" title="trait tor_keymgr::Keystore"><code>Keystore</code></a> trait.</p>
<p>This crate provides the following key store implementations:</p>
<ul>
<li>Arti key store: an on-disk store that stores keys in OpenSSH format.</li>
<li>(not yet implemented) C Tor key store: an on-disk store that is
backwards-compatible with C Tor (new keys are stored in the format used by C
Tor, and any existing keys are expected to be in this format too).</li>
</ul>
<p>In the future we plan to also support HSM-based key stores.</p>
<h3 id="key-specifiers-and-key-types"><a href="#key-specifiers-and-key-types">Key specifiers and key types</a></h3>
<p>The <a href="trait.Keystore.html" title="trait tor_keymgr::Keystore"><code>Keystore</code></a> APIs expect a “key specifier” (specified for each supported key
type via the <a href="trait.KeySpecifier.html" title="trait tor_keymgr::KeySpecifier"><code>KeySpecifier</code></a> trait), and a <a href="struct.KeyType.html" title="struct tor_keymgr::KeyType"><code>KeyType</code></a>.</p>
<p>A “key specifier” identifies a group of equivalent keys, each of a different
type (algorithm). It is used to determine the path of the key within the key
store (minus the extension).</p>
<p><a href="struct.KeyType.html" title="struct tor_keymgr::KeyType"><code>KeyType</code></a> represents the type of a key (e.g. “Ed25519 keypair”).
<a href="struct.KeyType.html#method.arti_extension" title="method tor_keymgr::KeyType::arti_extension"><code>KeyType::arti_extension</code></a> specifies what file extension keys of that type are
expected to have (when stored in an Arti store).</p>
<p>The <a href="trait.KeySpecifier.html#tymethod.arti_path" title="method tor_keymgr::KeySpecifier::arti_path"><code>KeySpecifier::arti_path</code></a> and <a href="struct.KeyType.html#method.arti_extension" title="method tor_keymgr::KeyType::arti_extension"><code>KeyType::arti_extension</code></a> are joined
to form the path of the key on disk (relative to the root dir of the key store).
This enables the key stores to have multiple keys with the same role (i.e. the
same <code>KeySpecifier::arti_path</code>), but different key types (i.e. different
<code>KeyType::arti_extension</code>s).</p>
<p><code>KeySpecifier</code> implementers must specify:</p>
<ul>
<li><code>arti_path</code>: the location of the key in the Arti key store. This also serves
as a unique identifier for a particular instance of a key.</li>
<li><code>ctor_path</code>: the location of the key in the C Tor key store (optional).</li>
</ul>
<h3 id="feature-flags"><a href="#feature-flags">Feature flags</a></h3><h4 id="additive-features"><a href="#additive-features">Additive features</a></h4>
<p>(None yet.)</p>
<h4 id="experimental-and-unstable-features"><a href="#experimental-and-unstable-features">Experimental and unstable features</a></h4>
<p>Note that the APIs enabled by these features are NOT covered by semantic
versioning<sup id="fnref1"><a href="#fn1">1</a></sup> guarantees: we might break them or remove them between patch
versions.</p>
<ul>
<li><code>keymgr</code> – build with full key manager support. Disabling this
feature causes <code>tor-keymgr</code> to export a no-op, placeholder implementation.</li>
</ul>
<div class="footnotes"><hr><ol><li id="fn1"><p>Remember, semantic versioning is what makes various <code>cargo</code>
features work reliably. To be explicit: if you want <code>cargo update</code>
to <em>only</em> make safe changes, then you cannot enable these
features.</p>
<!-- @@ end lint list maintained by maint/add_warning @@ -->&nbsp;<a href="#fnref1">↩</a></li></ol></div></div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ArtiNativeKeystore.html" title="struct tor_keymgr::ArtiNativeKeystore">ArtiNativeKeystore</a></div><div class="desc docblock-short">A dummy <code>ArtiNativeKeystore</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.ArtiPath.html" title="struct tor_keymgr::ArtiPath">ArtiPath</a></div><div class="desc docblock-short">The path of a key in the Arti key store.</div></li><li><div class="item-name"><a class="struct" href="struct.ArtiPathComponent.html" title="struct tor_keymgr::ArtiPathComponent">ArtiPathComponent</a></div><div class="desc docblock-short">A component of an <a href="struct.ArtiPath.html" title="struct tor_keymgr::ArtiPath"><code>ArtiPath</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.CTorPath.html" title="struct tor_keymgr::CTorPath">CTorPath</a></div><div class="desc docblock-short">The path of a key in the C Tor key store.</div></li><li><div class="item-name"><a class="struct" href="struct.KeyMgr.html" title="struct tor_keymgr::KeyMgr">KeyMgr</a></div><div class="desc docblock-short">A dummy key manager implementation.</div></li><li><div class="item-name"><a class="struct" href="struct.KeyType.html" title="struct tor_keymgr::KeyType">KeyType</a></div><div class="desc docblock-short">A dummy <code>KeyType</code>.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.KeySpecifier.html" title="trait tor_keymgr::KeySpecifier">KeySpecifier</a></div><div class="desc docblock-short">The “specifier” of a key, which identifies an instance of a key.</div></li><li><div class="item-name"><a class="trait" href="trait.Keystore.html" title="trait tor_keymgr::Keystore">Keystore</a></div><div class="desc docblock-short">A dummy key store trait.</div></li><li><div class="item-name"><a class="trait" href="trait.KeystoreError.html" title="trait tor_keymgr::KeystoreError">KeystoreError</a></div><div class="desc docblock-short">An error returned by a <a href="trait.Keystore.html" title="trait tor_keymgr::Keystore"><code>Keystore</code></a>.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Error.html" title="type tor_keymgr::Error">Error</a></div><div class="desc docblock-short">An Error type for this crate.</div></li><li><div class="item-name"><a class="type" href="type.Result.html" title="type tor_keymgr::Result">Result</a></div><div class="desc docblock-short">A Result type for this crate.</div></li></ul></section></div></main></body></html>